<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SmartBizz App — POS</title>
  <style>
    :root{--brand:#3d5ed4;--bg:#f6f8ff;--muted:#666;--card:#fff;--glass: rgba(255,255,255,0.7)}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:linear-gradient(180deg,var(--bg),#ffffff);color:#111}
    header{background:var(--brand);color:#fff;padding:14px 20px;display:flex;align-items:center;justify-content:space-between}
    header .brand{display:flex;gap:12px;align-items:center;font-weight:700}
    .logo{width:42px;height:42px;border-radius:50%;display:inline-grid;place-items:center;background:#fff;color:var(--brand);font-weight:800}
    .container{padding:18px;max-width:1200px;margin:18px auto}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(30,30,60,0.06)}
    .small{font-size:13px;color:var(--muted)}
    /* Login */
    .center{display:grid;place-items:center;height:calc(100vh - 72px)}
    .login-card{width:420px;padding:22px;text-align:center}
    .field{display:flex;flex-direction:column;margin-bottom:12px;text-align:left}
    input,select,textarea{padding:10px;border-radius:8px;border:1px solid #e6e8f0}
    button{background:var(--brand);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
    .muted{color:var(--muted)}
    /* Small buttons */
    .small-btn{
      padding:6px 10px;
      border-radius:6px;
      border:1px solid var(--brand);
      background:var(--brand);
      color:#fff;
      font-size:13px;
      cursor:pointer;
    }
    .small-btn:hover{
      background:#2d46a3;
    }
    /* POS layout */
    .topbar{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:12px}
    .search{display:flex;gap:8px}
    .product-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;max-height:520px;overflow:auto;padding:6px}
    .product{background:var(--glass);padding:8px;border-radius:8px;cursor:pointer;display:flex;flex-direction:column;gap:6px}
    .product .name{font-weight:600;font-size:14px}
    .cart{display:flex;flex-direction:column;gap:8px}
    .cart-items{max-height:420px;overflow:auto}
    .cart-row{display:flex;justify-content:space-between;gap:8px;padding:8px;border-radius:8px;background:#fbfbff}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    .report-filters{display:flex;gap:8px;flex-wrap:wrap}
    .footer-note{font-size:13px;color:var(--muted);margin-top:8px}
    /* receipt print */
    #receipt-print{display:block;padding:14px;max-width:340px;margin:14px auto;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
    @media print{
      body *{visibility:hidden}
      #receipt-print, #receipt-print *{visibility:visible}
      #receipt-print{position:fixed;left:0;top:0;width:100%}
    }
    /* responsive */
    @media (max-width:960px){.grid{grid-template-columns:1fr}.product-list{max-height:320px}}
    /* login profile SB */
    .login-profile{
      width:80px;height:80px;margin:0 auto 16px;
      border-radius:50%;
      background:var(--brand);
      color:#fff;
      display:grid;
      place-items:center;
      font-weight:800;
      font-size:28px;
    }
  </style>
</head>
<body>
  <header>
    <div class="brand"><div class="logo">SB</div><div>SmartBizz App</div></div>
    <div class="small">Point of Sale — Developed by Brian &lt;brianmurayandungu@gmail.com&gt;</div>
  </header>

  <div id="app"></div>

  <!-- login template -->
  <template id="login-template">
    <div class="center">
      <div class="card login-card">
        <div class="login-profile">SB</div>
        <h2>SmartBizz — Login</h2>
        <div class="small muted">Choose role and sign in</div>
        <div class="field"><label>Role</label>
          <select id="role-select"><option value="admin">Admin</option><option value="staff">Staff (Cashier)</option></select>
        </div>
        <div class="field"><label>Username</label><input id="username" placeholder="username" /></div>
        <div class="field"><label>Password</label><input id="password" type="password" placeholder="password" /></div>
        <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
          <button id="login-btn">Sign in</button>
        </div>
      </div>
    </div>
  </template>

  <!-- admin and staff templates remain unchanged -->

  <script>
    // =======================
    // Data / LocalStorage
    // =======================
    let users = JSON.parse(localStorage.getItem('users')) || [
      {username:'admin',password:'admin1234',role:'admin'},
      {username:'staff',password:'1234',role:'staff'}
    ];
    let products = JSON.parse(localStorage.getItem('products')) || [];
    let employees = JSON.parse(localStorage.getItem('employees')) || [];
    let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
    let sales = JSON.parse(localStorage.getItem('sales')) || [];
    let voids = JSON.parse(localStorage.getItem('voids')) || [];

    // =======================
    // App render
    // =======================
    const app = document.getElementById('app');

    function renderLogin(){
      app.innerHTML = '';
      const tpl = document.getElementById('login-template').content.cloneNode(true);
      app.appendChild(tpl);
      document.getElementById('login-btn').onclick = login;
    }

    function login(){
      const role = document.getElementById('role-select').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const user = users.find(u=>u.username===username && u.password===password && u.role===role);
      if(user){
        localStorage.setItem('currentUser',JSON.stringify(user));
        if(role==='admin') renderAdmin();
        else renderStaff();
      } else alert('Invalid credentials');
    }

    function logout(){localStorage.removeItem('currentUser');renderLogin();}

    // Admin and Staff render functions remain unchanged
    renderLogin();
  </script>
</body>
</html>
